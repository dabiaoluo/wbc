{% load i18n staticfiles imagekit %}

<div class="stakeholders">

    <!-- Shows the responsible person of the project, ususally the creator -->
    {% if project.get_created_by %}
    <div id='project-creator' class="clearfix">
        <h1> {% trans 'Projekt Verantwortlicher' %} </h1>
        <a href="{{project.get_created_by.profile.stakeholder.get_absolute_url }}">
            <div class="col-md-5">
                {% if project.get_created_by.profile.stakeholder.picture %}
                    {% generateimage 'wbc:details' source=project.get_created_by.profile.stakeholder.picture %}
                {% else %}
                <img class="creator_image" src="{% static 'img/person_placeholder.png' %}" />
                {% endif %}
            </div>
            <div class="col-md-7">
                <h2> {{project.get_created_by.profile.full_name}}</h2>
                <hr>
                {% if project.get_created_by.profile.stakeholder.description %}
                <p> {{project.get_created_by.profile.stakeholder.description}} </p>
                {% else %}
                <p> {% trans 'Keine Beschreibung vorhanden.' %}</p>
                {% endif %}
            </div>
        </a>
    </div>
    {% endif %}


    <!-- Show all people following the project -->
    {% if stakeholders %}
    <div>
        <h1> {% trans 'Projektbeteiligte' %} ({{stakeholders|length}})</h1>
        {% include "stakeholder/stakeholder_list.html" %}
    </div>
    {% else %}
    <div class="no-entries">
        {% trans 'Keine Projektbeteiligten' %}
    </div>
    {% endif %}

    
    <!-- If user is authenticated show the follow or leave button -->
    {% if user.is_authenticated %}
    <div class="follow-button-container">
        <button data-url="{% url 'project_follow' project.pk %}" class="btn btn-default follow-button wbc-button">
            <span class="fa-stack">
                <i class="fa fa-circle-thin fa-stack-2x"></i>
                {% if not following %}
                <i class="fa fa-sign-in fa-stack-1x fa-lg"></i>
                {% else %}
                <i class="fa fa-sign-out fa-stack-1x fa-lg"></i>
                {% endif %}
            </span>
            <span class="hidden-xs">
            {% if not following %}
            Projekt beitreten
            {% else %}
            Projekt verlassen
            {% endif %}
            </span>
        </button>
    </div>
    {% endif %}
</div>